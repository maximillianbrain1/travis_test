language: ruby
rvm:
 - 2.3.1

sudo: required
dist: trusty

before install:
  - if: branch = master
      docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"-p="(\['>$DOCKER_USERNAME";
      docker build -f Dockerfile -t $REPO . ;
      docker push jamesabrown/gatekeeper;
      fi

script:
 - bundle exec rake test
